<div class="divSpinner" ng-show="cargando">
	<div class="spinner" />
</div>

<div class="container" ng-show="!cargando && error.hayError">
	<div class="row">
		<div class="alert alert-warning">
			Los datos de esta página no fueron procesados correctamente, intente nuevamente.
		</div>
	</div>
	<div class="row">
		<div class="alert alert-danger">
			<p ng-repeat="error in error.errores">
				<strong>{{error.codigo}}:</strong><em>&nbsp;{{error.mensaje}}</em>
			</p>
		</div>
	</div>
</div>


<div ng-show="!cargando && !error.hayError">
	<div class="col-md-7">
		<form novalidate name="myForm" class="css-form" autocomplete="off">
			<div class="panel panel-primary">
				<div class="panel-heading">
					Ficha de División
				</div>
				<div class="panel-body no-gutter">
					<div class="col-md-12">
						<h3>Curso</h3>
					</div>
			
					<!-- Carrera -->
					<div class="col-md-6">
						<div class="input-group" ng-class="myForm.carrera.$valid ? 'has-success' : 'has-error'" ng-hide="esEdicion()">
							<span class="input-group-addon" data-toggle="tooltip" title="Carrera">
								<span class="glyphicon glyphicon-home" aria-hidden="true" /></span>
							<input type="text" ng-model="carrera.carreraId" name="carrera" ng-hide="true" required/>
							<select class="form-control" ng-options="carrera as carrera.descripcion for carrera in carreras" ng-model="carrera" ng-disabled="esEdicion()"></select>
						</div>
						<div class="input-group" ng-class="'has-success'" ng-show="esEdicion()">
							<span class="input-group-addon" data-toggle="tooltip" title="Carrera">
								<span class="glyphicon glyphicon-home" aria-hidden="true" /></span>
							<input class="form-control" type="text" ng-model="carrera.descripcion" ng-readonly="true" />
						</div>
					</div>
				
					<!-- Modos: [Presencial , A Distancia] -->
					<div class="col-md-6 ">
						<div class="input-group " ng-class="myForm.modo.$valid ? 'has-success' : 'has-error'">
							<span class="input-group-addon" data-toggle="tooltip" title="Modo de cursada">
								<i class="fa fa-users" aria-hidden="true"></i>&thinsp;/
								<i class="fa fa-desktop" aria-hidden="true"></i>
							</span>
							<input type="text" ng-model="cursoEditando.modoId" name="modo" required ng-hide="true" />
							<div class="btn-group" role="group" aria-label="...">
								<button type="button small" class="btn" ng-repeat="modo in modoLista" ng-class="cursoEditando.modoId==='{{modo.descripcion}}' ? 'btn-info' : 'btn-default'" ng-click="setModo($index)" ng-disabled="esEdicion()">{{modo.descripcion}}</button>
							</div>
						</div>
					</div>

					<!-- Anio Inicio-->
					<div class="col-md-4">
						<div class="input-group" ng-class="myForm.anioInicio.$valid ? 'has-success' : 'has-error'">
							<span class="input-group-addon ">
								<i aria-hidden="true" data-toggle="tooltip" title="Año calendario en que se inicia el dictado el curso.">Año Inicio</i>
							</span>
							<input type="number" class="form-control text-center" name="anioInicio" placeholder="[aaaa]" ng-model="cursoEditando.anioInicio" min="2015" max="2099" required ng-readonly="esEdicion()" />
						</div>
					</div>

					<!-- Mes Inicio-->
					<div class="col-md-4">
						<div class="input-group" ng-class="myForm.mesInicio.$valid ? 'has-success' : 'has-error'">
							<span class="input-group-addon ">
								<i aria-hidden="true" data-toggle="tooltip" title="Mes Calendario en que se inicia el dictado del curso.">Mes Inicio</i>
							</span>
							<input type="number" class="form-control text-center" name="mesInicio" placeholder="[mm]" ng-model="cursoEditando.mesInicio" min="1" max="12" required ng-readonly="esEdicion()" />
						</div>
					</div>

					<!-- Mes Final-->
					<div class="col-md-4">
						<div class="input-group" ng-class="myForm.mesFinal.$valid && cursoEditando.mesInicio<=cursoEditando.mesFinal ? 'has-success' : 'has-error'">
							<span class="input-group-addon ">
								<i aria-hidden="true" data-toggle="tooltip" title="Mes Calendario en que finaliza el dictado del curso.">Mes Final</i>
							</span>
							<input type="number" class="form-control text-center" name="mesFinal" placeholder="[mm]" ng-model="cursoEditando.mesFinal" min="1" max="12" required ng-readonly="esEdicion()" />
						</div>
					</div>


					<!-- Anio lectivo-->
					<div class="col-md-4">
						<div class="input-group" ng-class="myForm.anioLectivo.$valid ? 'has-success' : 'has-error'">
							<span class="input-group-addon ">
								<i aria-hidden="true" data-toggle="tooltip" title="Año lectivo al cual pertenece el curso.">Año Lectivo</i>
							</span>
							<input type="number" class="form-control text-center" name="anioLectivo" placeholder="[1,2,3...]" ng-model="cursoEditando.anioLectivo" min="1" max="99" required ng-readonly="esEdicion()"/>
						</div>
					</div>

					<!-- mmestre Lectivo-->
					<div class="col-md-4">
						<div class="input-group" ng-class="myForm.mmestreLectivo.$valid ? 'has-success' : 'has-error'">
							<span class="input-group-addon ">
								<i aria-hidden="true" data-toggle="tooltip" title="Cuatrimestre lectivo al cual pertenece el curso.">Cuatrimestre Lectivo</i>
							</span>
							<input type="number" class="form-control text-center" name="mmestreLectivo" placeholder="[1,2]" ng-model="cursoEditando.nmestreLectivo" min="1" max="12" required ng-readonly="esEdicion()" />
						</div>
					</div>


					<!-- Comentario de Curso -->
					<div class="col-md-12">
						<div class="input-group " ng-class="myForm.comentarioCurso.$valid ? 'has-success' : 'has-error' ">
							<span class="input-group-addon ">
								<i class="fa fa-comment-o" aria-hidden="true" data-toggle="tooltip" title="Observación o comentario sobre el curso." />
							</span>
							<input type="text" class="form-control" name="comentarioCurso" placeholder="[Observación/Comentario] " ng-model="cursoEditando.comentario">
						</div>
					</div>

					<div class="col-md-8">
						<div class="col-md-12">
							<h3>División</h3>
						</div>

						<!-- Turnos: [Mañana, Noche, Virtual] -->
						<div class="col-md-9" ng-show="cursoEditando.modoId==='Presencial'">
							<div class="input-group " ng-class="myForm.turno.$valid ? 'has-success' : 'has-error'">
								<span class="input-group-addon" data-toggle="tooltip" title="Turno de cursada">
									<i class="fa fa-users" aria-hidden="true"></i>
								</span>
								<input type="text" ng-model="divisionEditando.turnoId" name="turno" required ng-hide="true" />
								<div class="btn-group" role="group" aria-label="...">
									<button type="button" class="btn" ng-repeat="turno in turnoLista" ng-class="divisionEditando.turnoId==='{{turno.descripcion}}' ? 'btn-info' : 'btn-default'" ng-click="setTurno($index)" ng-show="turno.mostrar" ng-disabled="esEdicion()" >{{turno.descripcion}}</button>
								</div>
							</div>
						</div>

						<!-- Division: [A,B,C...] -->
						<div class="col-md-12">
							<div class="input-group " ng-class="myForm.division.$valid ? 'has-success' : 'has-error'">
								<span class="input-group-addon" data-toggle="tooltip" title="División de cursada">
									<i class="fa fa-users" aria-hidden="true"></i>
								</span>
								<input type="text" ng-model="divisionEditando.divisionId" name="division" required ng-hide="true" />
								<div class="btn-group" role="group" aria-label="...">
									<button type="button" class="btn" ng-repeat="division in divisionLista" ng-class="divisionEditando.divisionId==='{{division.descripcion}}' ? 'btn-info' : 'btn-default'" ng-click="setDivision($index)" ng-disabled="esEdicion()">{{division.descripcion}}</button>
								</div>
							</div>
						</div>

						<!-- Estado Division-->
						<div class="col-md-6">
							<div class="input-group" ng-class="'has-success'">
								<span class="input-group-addon ">
										<i class="fa fa-tachometer" aria-hidden="true" data-toggle="tooltip" title="Estado." />
								</span>
								<select class="form-control" ng-options="item as item.estadoDivisionId for item in estadosDivision" ng-model="estadoDivisionSeleccionado" ng-disabled="esEdicion()"></select>
							</div>
						</div>

						<!-- Comentario de División -->
						<div class="col-md-12">
							<div class="input-group " ng-class="myForm.comentarioDivision.$valid ? 'has-success' : 'has-error' ">
								<span class="input-group-addon ">
									<i class="fa fa-comment-o" aria-hidden="true" data-toggle="tooltip" title="Observación o comentario sobre la división." />
								</span>
								
								<input type="text" class="form-control" name="comentarioDivision" placeholder="[Observación/Comentario] " ng-model="divisionEditando.comentario">
							</div>
						</div>
					</div>
					
					<div class="col-md-4">
						<h3>Coordinación</h3>
						<span ng-repeat="dispositivo in dispositivosXCarrera">
							<span id="{{dispositivo.dispositivoId}}" droppable-area allow-droppable-area ng-dblclick="eliminarCoordinacion(dispositivo.dispositivoId)">
								<img ng-src="{{coordSeleccionado[dispositivo.dispositivoId].fotoPath}}" width="75" height="75" class="img-circle img-thumbnail" id="{{'placeHolder'+ dispositivo.dispositivoId}}" data-toggle="tooltip" title="{{dispositivo.dispositivoId}}">
							</span>
						</span>
					</div>
				</div>


				<div class="panel-footer " ng-class="myForm.$valid ? '' : 'con-error' ">
					<div class="col-md-8 ">
						<span ng-show="!myForm.$valid || cursoEditando.mesInicio>cursoEditando.mesFinal">El formulario está incompleto o con información incorrecta.</span>
					</div>
					<div class="text-right">
						<button class="btn btn-primary " ng-click="grabar(cursoEditando,divisionEditando) " ng-disabled="!myForm.$valid || cursoEditando.mesInicio>cursoEditando.mesFinal">{{accionLabel}}</button>
						<button class="btn btn-default " ng-click="cancelarEdicion() ">Cancelar</button>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="col-md-5" >
		<span ng-repeat="coord in coordinadores">
			<mi-coordinador-foto draggable-thing coordinador="coord"/>
		</span>
	</div>
</div>



<!-- Modal -->
<div class="divModalBase " ng-show="modalOpen ">
	<div class="col-md-4 "></div>
	<div class="col-md-4 " style='top: 33%'>
		<div class="panel panel-info ">
			<div class="panel-heading "><i class="fa fa-info-circle fa-lg .text-info "></i> &nbsp Ficha de Evento
			</div>
			<div class="panel-body ">
				{{msjModal}}.
			</div>
			<div class="panel-footer ">
				<div class="col-md-9"></div>
				<button class="btn btn-primary" ng-click="closeModal()" autofocus>cerrar</button>
			</div>
		</div>
	</div>
</div>