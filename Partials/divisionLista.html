<div class= "divSpinner" ng-show="cargando">
    <div class="spinner" />
</div>
<div class="container" ng-show="!cargando && (getCoordinacionesOK && getDivisionesOK && getGruposOK)">
  <div class="col-md-7">
    <h2>Divisiones</h2>
    <table class="table table-striped">
      <theader>
        <tr>
          <th>
            Año
          </th>
          <th>
            Cuatrimestre
          </th>
          <th>
            Modalidad
          </th>
          <th>
            Turno
          </th>
          <th>
            Div
          </th>
          <th>
            Coordinación
          </th>
          <th class="text-right">
            <span class="badge">{{grupos.length}}</span>
          </th>
        </tr>
      </theader>
      <tbody>
        <tr ng-repeat="division in divisiones" ng-class="{'selected':$index==selectedRow}" ng-click="setClickedRow($index);cargarGrupo(division)"
          ng-style="{'background-color':($index==selectedRow ? 'yellow':'')}">
          <td vertical-align="middle">
            {{division.cursos.anioInicio}}
            <br> {{ordinales[division.cursos.anioLectivo-1]}} año.
          </td>
          <td vertical-align="middle">
            {{meses[division.cursos.mesInicio-1]}}-{{meses[division.cursos.mesFinal-1]}}<br>
              {{ordinales[division.cursos.nmestreLectivo-1]}} Cuatrimestre.
          </td>
          <td vertical-align="middle">
            {{division.modoId}}
          </td>
          <td vertical-align="middle">
            {{division.turnoId !== 'Virtual'  ? division.turnoId : null}}
          </td>
          <td>
            {{division.divisionId}}
          </td>
          <td>
            <div class="media">
              <div class="row">
                <div class="col-md-6" ng-repeat="coordinacion in coordinaciones | filter:criteriaMatch(division)">
                  <img class="media-object img-circle" class="" width="33" height="33" src="{{coordinacion.coordinador.fotoPath}}" alt="{{coordinacion.coordinador.nombre}}" onerror="this.onerror=null;this.src='img/Persona.png';"
                    data-toogle="tooltip" title="{{coordinacion.coordinador.nombre}}">
                </div>
              </div>
            </div>
          </td>
          <td class="text-right">
            <span class="badge">{{obtenerCantidadAlumnos(division)}}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-5">
    <h2>Estudiantes</h2>
    <div style="max-height: 450px; overflow-y: auto;">
      <table class="table table-striped">
        <theader>
          <tr>
            <th>
              Legajo
            </th>
            <th>
              Nombre
            </th>
          </tr>
        </theader>

        <tbody>
          <tr ng-repeat="grupo in grupos  | filter:criteriaMatch(divisionSeleccionado)">
            <td>
              {{grupo.legajo.legajoNro}}
            </td>
            <td>
              {{grupo.legajo.alumno.apellido}},&nbsp{{grupo.legajo.alumno.nombre}}
            </td>
          </tr>
        </tbody>

      </table>
    </div>
  </div>
</div>

<div class="alert alert-warning" ng-show="!cargando && !(getDivisionesOK && getCoordinacionesOK && getGruposOK)">
  Las divisiones no fueron obtenidas, intente nuevamente.
</div>